<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.company-mapper">
 	<!--기업목록  -->
	<select id="comListData" resultType="ComVO" parameterType="hashmap">
	SELECT cno,cateno,cname,clogo,ctype,cindutype,cloc,cscore,num
	FROM (SELECT cno,cateno,cname,clogo,ctype,cindutype,cloc,cscore,rownum as num
	FROM (SELECT cno,cateno,cname,clogo,ctype,cindutype,cloc,cscore
	FROM company WHERE cateno=#{cateno} ORDER BY cscore DESC))
	WHERE num BETWEEN #{start} AND #{end}
	</select>
	
	<!-- 기업 총페이지 -->
	<select id="comTotalPage" resultType="int" parameterType="int">
	SELECT CEIL(COUNT(*)/10.0) FROM company
	WHERE cateno=#{cateno}
	</select>
	
	<!-- 기업 상세보기 -->
	<select id="comDetailData" resultType="ComVO" parameterType="int">
	SELECT * FROM company
	WHERE cno=#{cno}
	</select>
	
	<!-- 기업 후기보기 -->
	<select id="workReviewListData" resultType="WorkVO" parameterType="hashmap">
	SELECT c.cno,w.*,num
	FROM (SELECT c.cno,w.*,rownum as num
	FROM (SELECT c.cno,w.*
	FROM company c,workreview w WHERE c.cno=#{w.cno} ORDER BY rno DESC))
	WHERE num BETWEEN #{start} AND #{end}
	</select>
	
	<!-- 기업 검색하기 -->
	<select id="comsearch" resultType="ComVO" parameterType="hashmap">
	SELECT * FROM company
	WHERE ${fd} LIKE '%'||#{ss}||'%'
	</select>
	
	<!--  기업 후기 총페이지 
	<select id="workTotalPage" resultType="int" parameterType="int">
	SELECT CEIL(COUNT(*)/10.0) FROM company
	WHERE cateno=#{cateno}
	</select> -->

	
	<!-- 면접 후기보기 -->
	<select id="intReviewListData" resultType="IntVO" parameterType="hashmap">
	SELECT c.cno,i.*,num
	FROM (SELECT c.cno,i.*,rownum as num
	FROM (SELECT c.cno,i.*
	FROM company c,intreview i WHERE c.cno=#{i.cno} ORDER BY ino DESC))
	WHERE num BETWEEN #{start} AND #{end}
	</select>
</mapper>